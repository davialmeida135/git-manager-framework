<!DOCTYPE html>
<html lang="en">

<head th:replace="~{fragments/general.html :: head}"></head>

<body class="d-flex flex-column h-100 text-center text-bg-dark">

    <div th:replace="~{fragments/svg-fragments :: svg}"></div>

    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header th:replace="~{fragments/general.html :: header_fragments('', ${user})}" class="mb-auto"></header>

        <main class="flex-grow-1 d-flex flex-column justify-content-center px-3">
            <div class="container">
                <h1 class="mb-4">Cronograma</h1>

                <!-- Botão para abrir o modal -->
                <div class="d-flex justify-content-center mb-4">
                    <button type="button" class="btn btn-primary me-3" data-bs-toggle="modal"
                        data-bs-target="#modalCronograma">
                        Nova data
                    </button>
                </div>

                <!-- Modal -->
                <div class="modal fade" id="modalCronograma" tabindex="-1" aria-labelledby="modalCronogramaLabel"
                    aria-hidden="true">
                    <div
                        th:replace="~{fragments/modal_form_cronograma :: modal_form_cronograma(${repository}, ${user}, ${repository.name})}">
                    </div>
                </div>

                <!-- Tabela de cronograma -->
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">Title</th>
                                <th scope="col">Description</th>
                                <th scope="col">Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Iteração sobre os itens do cronograma -->
                            <tr th:each="item : ${schedule}">
                                <td th:text="${item.titulo}"></td>
                                <td th:text="${item.descricao}"></td>
                                <td th:text="${item.prazo}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Rodapé -->
            <footer class="mt-4 text-white-50">
                <p th:if="${error}" class="text-danger">Error: <span th:text="${error}"></span></p>
                <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a
                        href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p>
            </footer>
        </main>
    </div>

    <!-- Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- Script para inicializar o modal -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var modalCronograma = new bootstrap.Modal(document.getElementById('modalCronograma'));
        });
    </script>
</body>

</html>